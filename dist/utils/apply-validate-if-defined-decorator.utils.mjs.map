{"version":3,"sources":["../../src/utils/apply-validate-if-defined-decorator.utils.ts"],"names":[],"mappings":";;;;;;;;AAkBO,SAAS,+BAAA,CAAgC,aAAuB,WAAqB,EAAA;AAE1F,EAAI,IAAA,CAAC,2BAA6B,EAAA;AAChC,IAAA;AAAA;AAIF,EAAM,MAAA,cAAA,GAAmD,UAAQ,iBAAiB,CAAA;AAGlF,EAAA,MAAM,mBAAmB,cAAe,CAAA,UAAA,CAAW,CAAC,CAAG,EAAA,KAAA,KAAU,UAAU,MAAS,CAAA;AAGpF,EAAiB,gBAAA,CAAA,WAAA,CAAY,WAAW,WAAW,CAAA;AACrD;AAWA,SAAS,yBAA4B,GAAA;AACnC,EAAI,IAAA;AAEF,IAAA,SAAA,CAAQ,iBAAiB,CAAA;AACzB,IAAO,OAAA,IAAA;AAAA,GACD,CAAA,OAAA,CAAA,EAAA;AAEN,IAAO,OAAA,KAAA;AAAA;AAEX","file":"apply-validate-if-defined-decorator.utils.mjs","sourcesContent":["/**\n * @function applyValidateIfDefinedDecorator\n * @description Applies the ValidateIf decorator from class-validator to a property of a class.\n * This makes the validation only run if the property is defined (not undefined).\n * If class-validator is not available, this function does nothing.\n *\n * @param targetClass - The class constructor to apply the decorator to\n * @param propertyKey - The name of the property to conditionally validate\n *\n * @example\n * class UserDto {\n *   @IsString()\n *   name: string;\n * }\n *\n * // Only validate the name property if it's defined\n * applyValidateIfDefinedDecorator(UserDto, 'name');\n */\nexport function applyValidateIfDefinedDecorator(targetClass: Function, propertyKey: string) {\n  // Check if class-validator is available in the project\n  if (!isClassValidatorAvailable()) {\n    return\n  }\n\n  // Import class-validator dynamically\n  const classValidator: typeof import('class-validator') = require('class-validator')\n\n  // Create the ValidateIf decorator factory that only validates if the value is not undefined\n  const decoratorFactory = classValidator.ValidateIf((_, value) => value !== undefined)\n\n  // Apply the decorator to the target class property\n  decoratorFactory(targetClass.prototype, propertyKey)\n}\n\n/**\n * @function isClassValidatorAvailable\n * @description Checks if the class-validator package is available in the project.\n * This is used to gracefully handle cases where class-validator is not installed.\n *\n * @returns {boolean} True if class-validator is available, false otherwise\n *\n * @internal\n */\nfunction isClassValidatorAvailable() {\n  try {\n    // Attempt to require class-validator\n    require('class-validator')\n    return true\n  } catch {\n    // Return false if class-validator is not available\n    return false\n  }\n}\n"]}